<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accommodation Locator - TravelMate Singapore</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .navbar {
            background: #0056b3;
            padding: 1rem 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            color: #B40000;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #B40000;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        h1 {
            color: #B40000;
            margin-bottom: 1rem;
            text-align: center;
        }

        .intro-text {
            text-align: center;
            color: #666;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .location-input-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .input-group h3 {
            color: #333;
            font-size: 1.1rem;
        }

        .search-input {
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: #B40000;
            box-shadow: 0 0 0 3px rgba(180,0,0,0.1);
        }

        .button-group {
            display: flex;
            gap: 1rem;
        }

        .btn {
            flex: 1;
            padding: 0.8rem;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #B40000 0%, #8B0000 100%);
            color: white;
        }

        .btn-primary:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(180,0,0,0.3);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .loading {
            text-align: center;
            color: #B40000;
            font-weight: bold;
            margin: 2rem 0;
        }

        .spinner {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #B40000;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .info-message {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            color: #856404;
        }

        .error-message {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            color: #721c24;
        }

        .success-message {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            color: #155724;
        }

        .results-section {
            margin-top: 3rem;
        }

        .results-header {
            color: #B40000;
            font-size: 1.3rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #B40000;
            padding-bottom: 0.5rem;
        }

        .accommodations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
        }

        .accommodation-card {
            background: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 1.5rem;
            transition: all 0.3s;
        }

        .accommodation-card:hover {
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
            transform: translateY(-4px);
            border-color: #B40000;
        }

        .accommodation-type {
            display: inline-block;
            background: #B40000;
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .accommodation-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .accommodation-location {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 1rem;
        }

        .accommodation-price {
            font-size: 1.1rem;
            color: #B40000;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .accommodation-details {
            font-size: 0.9rem;
            color: #555;
            line-height: 1.6;
        }

        .detail-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 0.8rem;
        }

        .detail-label {
            font-weight: bold;
            color: #333;
            min-width: 100px;
        }

        .detail-value {
            color: #666;
        }

        .distance {
            color: #486220;
            font-weight: bold;
        }

        .directions-btn {
            background: #486220;
            color: white;
            border: none;
            padding: 0.6rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 1rem;
            transition: background 0.3s;
            width: 100%;
        }

        .directions-btn:hover {
            background: #3d5018;
        }

        .no-results {
            text-align: center;
            color: #666;
            font-size: 1.1rem;
            padding: 2rem;
        }

        .map-container {
            width: 100%;
            height: 400px;
            border-radius: 8px;
            margin: 2rem 0;
            overflow: hidden;
            border: 1px solid #ddd;
        }

        .map-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        @media (max-width: 768px) {
            .location-input-section {
                grid-template-columns: 1fr;
            }

            .accommodations-grid {
                grid-template-columns: 1fr;
            }

            .nav-links {
                gap: 1rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">üè† TravelMate</div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="student-housing.html">Student Housing</a></li>
                <li><a href="budget-hotels.html">Budget Hotels</a></li>
                <li><a href="short-term-stays.html">Short-Term Rentals</a></li>
                <li><a href="index.html#contact">Contact</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <h1>üó∫Ô∏è Find Accommodation Near You</h1>
        <p class="intro-text">Discover student housing, budget hotels, and short-term rentals near your preferred location in Singapore</p>

        <!-- Location Input Section -->
        <div class="location-input-section">
            <!-- Current Location -->
            <div class="input-group">
                <h3>üìç Use Your Current Location</h3>
                <button class="btn btn-primary" onclick="getUserLocation()">Find My Location</button>
                <div id="currentLocationStatus"></div>
            </div>

            <!-- Search by Location -->
            <div class="input-group">
                <h3>üîç Search by Location</h3>
                <input type="text" id="locationSearch" class="search-input" placeholder="Enter location (e.g., Marina Bay, Orchard, Jurong)">
                <div class="button-group">
                    <button class="btn btn-primary" onclick="searchLocation()">Search</button>
                    <button class="btn btn-secondary" onclick="clearResults()">Clear</button>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="results-section" style="display: none;">
            <div class="results-header">Nearby Accommodations</div>
            <div id="resultsList"></div>
        </div>

        <!-- Map Container -->
        <div id="mapContainer" class="map-container" style="display: none;"></div>
    </div>

    <script>
        // Accommodation data from all three categories
        const allAccommodations = [
            // Student Housing
            {
                type: 'Student Housing',
                name: 'Rosewood Condo',
                location: '10 Woodlands Street 13, Singapore 737853',
                region: 'Woodlands',
                price: 750,
                priceUnit: '/month',
                latitude: 1.4368,
                longitude: 103.8378,
                contact: 'contact@uhomes.com | +65 9123 4567'
            },
            {
                type: 'Student Housing',
                name: 'The Warren',
                location: '20 Choa Chu Kang Road, Singapore 689578',
                region: 'Choa Chu Kang',
                price: 900,
                priceUnit: '/month',
                latitude: 1.3867,
                longitude: 103.7450,
                contact: 'contact@uhomes.com | +65 9123 4568'
            },
            {
                type: 'Student Housing',
                name: 'Maysprings',
                location: '18 Bukit Panjang Road, Singapore 679842',
                region: 'Bukit Panjang',
                price: 1050,
                priceUnit: '/month',
                latitude: 1.3758,
                longitude: 103.7755,
                contact: 'contact@uhomes.com | +65 9123 4569'
            },
            {
                type: 'Student Housing',
                name: 'The Madeira',
                location: '56 Bukit Batok Street 31, Singapore 659445',
                region: 'Bukit Gombak',
                price: 1280,
                priceUnit: '/month',
                latitude: 1.3445,
                longitude: 103.7650,
                contact: 'contact@uhomes.com | +65 9123 4570'
            },
            {
                type: 'Student Housing',
                name: 'Bishan Park Condominium',
                location: '24 Sin Ming Walk, Singapore 575572',
                region: 'Bright Hill',
                price: 800,
                priceUnit: '/month',
                latitude: 1.3520,
                longitude: 103.8370,
                contact: 'contact@uhomes.com | +65 9123 4571'
            },
            {
                type: 'Student Housing',
                name: 'Ivory Heights - BESPOKE',
                location: '117 Jurong East Street 13, Singapore 600117',
                region: 'Chinese Garden',
                price: 1040,
                priceUnit: '/month',
                latitude: 1.3345,
                longitude: 103.7424,
                contact: 'contact@uhomes.com | +65 9123 4572'
            },
            {
                type: 'Student Housing',
                name: 'Cashew Heights - AP',
                location: '97 Cashew Road, Singapore 679668',
                region: 'Cashew',
                price: 690,
                priceUnit: '/month',
                latitude: 1.4045,
                longitude: 103.8255,
                contact: 'contact@uhomes.com | +65 9123 4573'
            },
            {
                type: 'Student Housing',
                name: 'Lagoon View - X1',
                location: '5000K Marine Parade Road, Singapore 449295',
                region: 'Siglap',
                price: 850,
                priceUnit: '/month',
                latitude: 1.3048,
                longitude: 103.8993,
                contact: 'contact@uhomes.com | +65 9123 4574'
            },
            {
                type: 'Student Housing',
                name: 'Eastpoint Green',
                location: '7 Simei Street 3, Singapore 529893',
                region: 'Simei',
                price: 890,
                priceUnit: '/month',
                latitude: 1.3455,
                longitude: 103.9545,
                contact: 'contact@uhomes.com | +65 9123 4575'
            },
            {
                type: 'Student Housing',
                name: 'Aquarius by the Park',
                location: '5 Bedok Reservoir View, Singapore 478928',
                region: 'Bedok Reservoir',
                price: 1280,
                priceUnit: '/month',
                latitude: 1.3310,
                longitude: 103.8679,
                contact: 'contact@uhomes.com | +65 9123 4576'
            },
            {
                type: 'Student Housing',
                name: 'The Meyer Place',
                location: '2 Meyer Place, Singapore 437989',
                region: 'Katong Park',
                price: 1000,
                priceUnit: '/month',
                latitude: 1.3055,
                longitude: 103.8912,
                contact: 'contact@uhomes.com | +65 9123 4577'
            },
            {
                type: 'Student Housing',
                name: 'Elias Green',
                location: '1 Elias Green, Singapore 519959',
                region: 'Pasir Ris',
                price: 980,
                priceUnit: '/month',
                latitude: 1.3791,
                longitude: 103.9791,
                contact: 'contact@uhomes.com | +65 9123 4578'
            },
            {
                type: 'Student Housing',
                name: '334 Ubi Ave 1',
                location: '334 Ubi Avenue 1, Singapore 400334',
                region: 'Ubi',
                price: 690,
                priceUnit: '/month',
                latitude: 1.3297,
                longitude: 103.8905,
                contact: 'contact@uhomes.com | +65 9123 4579'
            },
            {
                type: 'Student Housing',
                name: 'TRE Residences - HC',
                location: '9 Geylang East Avenue 1, Singapore 389783',
                region: 'Aljunied',
                price: 1280,
                priceUnit: '/month',
                latitude: 1.3168,
                longitude: 103.8748,
                contact: 'contact@uhomes.com | +65 9123 4580'
            },
            {
                type: 'Student Housing',
                name: 'Principal Garden',
                location: '99 Prince Charles Crescent, Singapore 159029',
                region: 'Redhill',
                price: 1100,
                priceUnit: '/month',
                latitude: 1.2878,
                longitude: 103.8169,
                contact: 'contact@uhomes.com | +65 9123 4581'
            },
            {
                type: 'Student Housing',
                name: 'Horizon Towers',
                location: '29 Leonie Hill, Singapore 239228',
                region: 'Great World',
                price: 1250,
                priceUnit: '/month',
                latitude: 1.2960,
                longitude: 103.8317,
                contact: 'contact@uhomes.com | +65 9123 4582'
            },
            {
                type: 'Student Housing',
                name: 'The Clement Canopy - Z',
                location: '16 Clementi Avenue 1, Singapore 129960',
                region: 'Clementi',
                price: 990,
                priceUnit: '/month',
                latitude: 1.3150,
                longitude: 103.7643,
                contact: 'contact@uhomes.com | +65 9123 4583'
            },
            {
                type: 'Student Housing',
                name: '25 Woodleigh Close',
                location: '25 Woodleigh Close, Singapore 357920',
                region: 'Woodleigh',
                price: 1278,
                priceUnit: '/month',
                latitude: 1.3572,
                longitude: 103.8683,
                contact: 'contact@uhomes.com | +65 9123 4584'
            },
            {
                type: 'Student Housing',
                name: 'Summerdale - HC',
                location: '10 Boon Lay Drive, Singapore 649929',
                region: 'Boon Lay',
                price: 890,
                priceUnit: '/month',
                latitude: 1.3409,
                longitude: 103.7633,
                contact: 'contact@uhomes.com | +65 9123 4585'
            },
            {
                type: 'Student Housing',
                name: 'Caspian - BESPOKE',
                location: '54 Lakeside Drive, Singapore 648317',
                region: 'Lakeside',
                price: 700,
                priceUnit: '/month',
                latitude: 1.3554,
                longitude: 103.7258,
                contact: 'contact@uhomes.com | +65 9123 4586'
            },
            // Budget Hotels
            {
                type: 'Budget Hotels',
                name: 'Budget Inn Marina',
                location: 'Marina Bay, Singapore',
                region: 'Marina Bay',
                price: 65,
                priceUnit: '/night',
                latitude: 1.2833,
                longitude: 103.8617,
                contact: 'reservations.singapore@hoteljen.com | +65 6708 8880'
            },
            {
                type: 'Budget Hotels',
                name: 'Orchard Suites',
                location: 'Orchard Road, Singapore',
                region: 'Orchard',
                price: 75,
                priceUnit: '/night',
                latitude: 1.3022,
                longitude: 103.8343,
                contact: 'reservations.singapore@hoteljen.com | +65 6708 8881'
            },
            {
                type: 'Budget Hotels',
                name: 'Newton Plaza Hotel',
                location: 'Newton, Singapore',
                region: 'Newton',
                price: 70,
                priceUnit: '/night',
                latitude: 1.3145,
                longitude: 103.8386,
                contact: 'reservations.singapore@hoteljen.com | +65 6708 8882'
            },
            {
                type: 'Budget Hotels',
                name: 'Tiong Bahru Rooms',
                location: 'Tiong Bahru, Singapore',
                region: 'Tiong Bahru',
                price: 68,
                priceUnit: '/night',
                latitude: 1.2878,
                longitude: 103.8090,
                contact: 'reservations.singapore@hoteljen.com | +65 6708 8883'
            },
            {
                type: 'Budget Hotels',
                name: 'East Coast Inn',
                location: 'East Coast, Singapore',
                region: 'East Coast',
                price: 60,
                priceUnit: '/night',
                latitude: 1.3011,
                longitude: 103.9167,
                contact: 'reservations.singapore@hoteljen.com | +65 6708 8884'
            },
            {
                type: 'Budget Hotels',
                name: 'Jurong Comfort Hotel',
                location: 'Jurong East, Singapore',
                region: 'Jurong East',
                price: 50,
                priceUnit: '/night',
                latitude: 1.3341,
                longitude: 103.7429,
                contact: 'reservations.singapore@hoteljen.com | +65 6708 8885'
            },
            {
                type: 'Budget Hotels',
                name: 'Bedok Beach Hostel',
                location: 'Bedok, Singapore',
                region: 'Bedok',
                price: 55,
                priceUnit: '/night',
                latitude: 1.3245,
                longitude: 103.9276,
                contact: 'reservations.singapore@hoteljen.com | +65 6708 8886'
            },
            // Short-Term Rentals
            {
                type: 'Short-Term Rentals',
                name: 'Cove Studio - Central',
                location: 'Central Singapore',
                region: 'Central',
                price: 2200,
                priceUnit: '/month (3 days min)',
                latitude: 1.2902,
                longitude: 103.8519,
                contact: 'hello@covenow.sg | +65 9123 5000'
            },
            {
                type: 'Short-Term Rentals',
                name: 'Cove Studio - East',
                location: 'East Singapore',
                region: 'East',
                price: 1800,
                priceUnit: '/month (3 days min)',
                latitude: 1.3298,
                longitude: 103.8900,
                contact: 'hello@covenow.sg | +65 9123 5001'
            },
            {
                type: 'Short-Term Rentals',
                name: 'Cove Studio - West',
                location: 'West Singapore',
                region: 'West',
                price: 1600,
                priceUnit: '/month (3 days min)',
                latitude: 1.3409,
                longitude: 103.7640,
                contact: 'hello@covenow.sg | +65 9123 5002'
            },
            {
                type: 'Short-Term Rentals',
                name: 'Cove Studio - North',
                location: 'North Singapore',
                region: 'North',
                price: 1400,
                priceUnit: '/month (3 days min)',
                latitude: 1.4265,
                longitude: 103.8308,
                contact: 'hello@covenow.sg | +65 9123 5003'
            },
            {
                type: 'Short-Term Rentals',
                name: 'Cove Studio - Northeast',
                location: 'Northeast Singapore',
                region: 'Northeast',
                price: 1500,
                priceUnit: '/month (3 days min)',
                latitude: 1.3750,
                longitude: 103.9350,
                contact: 'hello@covenow.sg | +65 9123 5004'
            },
            {
                type: 'Short-Term Rentals',
                name: 'Cove Studio - Southeast',
                location: 'Southeast Singapore',
                region: 'Southeast',
                price: 1700,
                priceUnit: '/month (3 days min)',
                latitude: 1.2980,
                longitude: 103.8950,
                contact: 'hello@covenow.sg | +65 9123 5005'
            },
            {
                type: 'Short-Term Rentals',
                name: 'Cove Studio - Southwest',
                location: 'Southwest Singapore',
                region: 'Southwest',
                price: 1550,
                priceUnit: '/month (3 days min)',
                latitude: 1.3200,
                longitude: 103.7400,
                contact: 'hello@covenow.sg | +65 9123 5006'
            },
            {
                type: 'Short-Term Rentals',
                name: 'Cove Studio - Northwest',
                location: 'Northwest Singapore',
                region: 'Northwest',
                price: 1450,
                priceUnit: '/month (3 days min)',
                latitude: 1.3800,
                longitude: 103.7700,
                contact: 'hello@covenow.sg | +65 9123 5007'
            },
            {
                type: 'Short-Term Rentals',
                name: 'Cove Studio - Downtown',
                location: 'Downtown Singapore',
                region: 'Downtown',
                price: 2400,
                priceUnit: '/month (3 days min)',
                latitude: 1.2802,
                longitude: 103.8509,
                contact: 'hello@covenow.sg | +65 9123 5008'
            }
        ];

        let currentUserLocation = null;

        // Calculate distance between two coordinates (Haversine formula)
        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // Earth's radius in kilometers
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        // Get user's current location
        function getUserLocation() {
            const statusDiv = document.getElementById('currentLocationStatus');
            statusDiv.innerHTML = '<div class="loading"><span class="spinner"></span>Getting your location...</div>';

            if (!navigator.geolocation) {
                statusDiv.innerHTML = '<div class="error-message">Geolocation is not supported by your browser</div>';
                return;
            }

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    currentUserLocation = {
                        lat: position.coords.latitude,
                        lon: position.coords.longitude
                    };
                    statusDiv.innerHTML = `<div class="success-message">‚úì Location found! Now showing nearby accommodations...</div>`;
                    showNearbyAccommodations();
                },
                (error) => {
                    statusDiv.innerHTML = `<div class="error-message">Error: ${error.message}. Please enable location access or try searching by location.</div>`;
                }
            );
        }

        // Search location by name
        function searchLocation() {
            const searchInput = document.getElementById('locationSearch').value.trim();
            if (!searchInput) {
                alert('Please enter a location to search');
                return;
            }

            const searchLower = searchInput.toLowerCase();
            const matchedAccommodations = allAccommodations.filter(acc =>
                acc.region.toLowerCase().includes(searchLower) ||
                acc.location.toLowerCase().includes(searchLower) ||
                acc.name.toLowerCase().includes(searchLower)
            );

            if (matchedAccommodations.length > 0) {
                displayResults(matchedAccommodations);
                document.getElementById('currentLocationStatus').innerHTML = `<div class="success-message">Found ${matchedAccommodations.length} accommodation(s) matching "${searchInput}"</div>`;
            } else {
                document.getElementById('resultsSection').style.display = 'none';
                document.getElementById('currentLocationStatus').innerHTML = `<div class="error-message">No accommodations found for "${searchInput}". Try another location or use current location.</div>`;
            }
        }

        // Show nearby accommodations based on current location
        function showNearbyAccommodations() {
            if (!currentUserLocation) {
                alert('Please share your location first');
                return;
            }

            const nearby = allAccommodations.map(acc => ({
                ...acc,
                distance: calculateDistance(currentUserLocation.lat, currentUserLocation.lon, acc.latitude, acc.longitude)
            })).sort((a, b) => a.distance - b.distance).slice(0, 20);

            displayResults(nearby);
        }

        // Display results
        function displayResults(accommodations) {
            const resultsSection = document.getElementById('resultsSection');
            const resultsList = document.getElementById('resultsList');

            if (accommodations.length === 0) {
                resultsList.innerHTML = '<div class="no-results">No accommodations found.</div>';
                resultsSection.style.display = 'block';
                return;
            }

            resultsList.innerHTML = accommodations.map(acc => `
                <div class="accommodation-card">
                    <div class="accommodation-type">${acc.type}</div>
                    <div class="accommodation-name">${acc.name}</div>
                    <div class="accommodation-location">üìç ${acc.location}</div>
                    <div class="accommodation-price">SGD $${acc.price} ${acc.priceUnit}</div>
                    
                    <div class="accommodation-details">
                        <div class="detail-row">
                            <span class="detail-label">Region:</span>
                            <span class="detail-value">${acc.region}</span>
                        </div>
                        ${acc.distance ? `<div class="detail-row">
                            <span class="detail-label">Distance:</span>
                            <span class="detail-value distance">${acc.distance.toFixed(2)} km away</span>
                        </div>` : ''}
                        <div class="detail-row">
                            <span class="detail-label">Contact:</span>
                            <span class="detail-value">${acc.contact}</span>
                        </div>
                    </div>
                    
                    <button class="directions-btn" onclick="openDirections(${acc.latitude}, ${acc.longitude}, '${acc.name}')">
                        üó∫Ô∏è Get Directions
                    </button>
                </div>
            `).join('');

            resultsSection.style.display = 'block';
        }

        // Open directions in Google Maps
        function openDirections(lat, lon, name) {
            const url = `https://www.google.com/maps/search/${encodeURIComponent(name)}/@${lat},${lon},16z`;
            window.open(url, '_blank');
        }

        // Clear results
        function clearResults() {
            document.getElementById('resultsSection').style.display = 'none';
            document.getElementById('locationSearch').value = '';
            document.getElementById('currentLocationStatus').innerHTML = '';
            currentUserLocation = null;
        }

        // Allow Enter key to search
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('locationSearch').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchLocation();
                }
            });
        });
    </script>
</body>
</html>
